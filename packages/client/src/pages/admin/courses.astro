---
import Button from "../../components/Button/Button";
import ModalLayout from "../../layouts/ModalLayout.astro";
import EditCourse from "../../components/EditCourse/EditCourse";
import AdminCourseCard from "../../components/AdminCourseCard/AdminCourseCard";
import AddCourse from "../../components/AddCourse/AddCourse";
import { fetchData } from "../../utils/common";
const token = Astro?.request?.headers?.get("cookie")?.split("=")[1];
const data = await fetchData(`admin/courses`, token);
---

<ModalLayout title="Admin | Courses">
    <div class="admin_dashboard_courses_container">
        <div class="create_course_container">
            <div class="header_title">Courses</div>
            <Button text="Create Course" id={"open_modal"} />
        </div>
        <div class="courses_container">
            {
                data?.map((course) => {
                    return <AdminCourseCard course={course} client:load />;
                })
            }
        </div>
    </div>
    <div slot="modal_header_slot">Edit Course</div>
    <div slot="modal_content_slot">
        <AddCourse client:load />
    </div>
    <div slot="modal_footer_slot" class="modal_footer">
        <Button text="Close Modal" id={"close_modal"} />
    </div>
</ModalLayout>
<!-- <EditCourse client:load /> -->
<style>
    .courses_container {
        display: flex;
        flex-wrap: wrap;
    }
    .course {
        flex: 1;
        min-width: calc(100% / 3);
        max-width: calc(100% / 3);
    }
    .create_course_container {
        display: flex;
        justify-content: space-between;
        padding: 0px 35px 0px 20px;
        /* width: 90%; */
    }
    .create_course_container .header_title {
        font-size: 24px;
    }
</style>
